= render 'layouts/header'
.container-fluid
  .menu-toggle.btn.btn-success.btn-sm{style: 'z-index: 10; display: inline-block; position: fixed; text-align: right; margin-left: 187px; margin-top: 4px'}
    Hide
    %span.glyphicon.glyphicon-backward
  .row
    .center#side-menu{style: 'position: fixed; width: 240px; height: 100%; overflow: auto'}
      %h4{onselectstart: 'return false', style: ''} Search
      %input.input-sm.form-control.search-box{type: 'text', style: 'margin-left: 20px; width: 200px'}

      %h4{onselectstart: 'return false'} Levels
      %div{onselectstart: 'return false'}
        %label.checkbox-inline
          %input.level-checkbox{type: 'checkbox', id: 'level-0', value: 0, checked: true}
            Cantrip
        %br
        - 9.times do |i|
          %label.checkbox-inline
            %input.level-checkbox{type: 'checkbox', id: "level-#{i+1}", value: i+1, checked: true}= "#{i+1}"
          - if (i + 1) % 3 == 0
            %br
          - else
            %span

      %h4{onselectstart: 'return false'} Schools
      %div{style: 'text-align: left; margin-left: 70px', onselectstart: 'return false'}
        - @schools.each do |school|
          %label.checkbox-inline
            %input.school-checkbox{type: 'checkbox', id: "school-#{school}", value: school, checked: true}= school
          %br
      %h4{onselectstart: 'return false'} Classes
      %div{style: 'text-align: left; margin-left: 45px; margin-right: 45px', onselectstart: 'return false'}
        - @classes.each_slice(2) do |dnd_classes|
          .row
            - dnd_classes.each do |dnd_class|
              .col-xs-6
                %label.checkbox-inline
                  %input.class-checkbox{type: 'checkbox', id: "class-#{dnd_class}", value: dnd_class, checked: true}= dnd_class
      %br
      %span.spell-count
        0 spells
    .container-fluid#main-content{style: 'height: 100%; overflow: auto; margin-left: 260px; margin-right: 20px'}
      = render 'layouts/notice_div'
      %h1 D&D Spell List
      %table.full-table.table
        %thead
          %tr
            %th
            %th{style: 'white-space: nowrap'} Name
            %th{style: 'white-space: nowrap'} Level
            %th{style: 'white-space: nowrap'} School
            %th{style: 'white-space: nowrap'} Classes
            %th{style: 'white-space: nowrap'} V
            %th{style: 'white-space: nowrap'} S
            %th{style: 'white-space: nowrap'} M
            %th{style: 'white-space: nowrap'} Range
            %th{style: 'white-space: nowrap'} Duration
            %th{style: 'white-space: nowrap'} Casting Time
        %tbody
          - @spells.each do |_, spell|
            %tr.summary.summary-visible{'data-name': spell['name'], 'data-level': spell['level'], 'data-school': spell['school'], 'data-classes': spell['classes'], 'data-vsm': [spell['v'], spell['s'], spell['m']]}
              %td.expand{onselectstart: 'return false'}
                %span.glyphicon.glyphicon-resize-full
              %td= spell['name']
              %td= spell['level']
              %td= spell['school']
              %td= spell['classes'].sort.join(', ')
              %td
                %span.glyphicon{class: "glyphicon-#{spell['v'] ? 'ok' : 'remove'}"}
              %td
                %span.glyphicon{class: "glyphicon-#{spell['s'] ? 'ok' : 'remove'}"}
              %td
                %span.glyphicon{class: "glyphicon-#{spell['m'] ? 'ok' : 'remove'}"}
              %td= spell['range']
              %td= spell['duration']
              %td= spell['casting_time']
            %tr.details.details-invisible
              %td{colspan: 11}
                %table.table
                  %tbody
                    %tr
                      - if spell['m']
                        %td{style: 'width: 30%'}
                          %h5 Material
                          = spell['material']
                      %td
                        %h5 Short Description
                        %p= spell['short_description']
                    %tr
                      %td{colspan: spell['m'] ? 2 : 1}
                        %h5 Description
                        = spell['description']
      = render 'layouts/footer'
      = debug(params) if Rails.env.development?
